<script type="module">
import { supabase } from "../supabase.js";

const nameInput = document.getElementById("customerName");
const phoneInput = document.getElementById("customerPhone");
const saveBtn = document.getElementById("saveCustomer");

saveBtn.addEventListener("click", async () => {
    const name = nameInput.value.trim();
    const phone = phoneInput.value.trim();

    if (!name || !phone) {
        alert("الرجاء إدخال الاسم ورقم الجوال");
        return;
    }

    const { error } = await supabase
        .from("customers")
        .insert([
            { name: name, phone_number: phone }
        ]);

    if (error) {
        alert("فشل الحفظ");
        console.log(error);
    } else {
        alert("تم إضافة العميل بنجاح");
        window.location.href = "customers.html";  
    }
});
</script>
