<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>

<style>
body {
    background:#000;
    color:#fff;
    font-family:Tajawal, Arial;
    text-align:center;
    padding:20px;
}
table {
    width:95%;
    margin:15px auto;
    border-collapse:collapse;
}
th, td {
    padding:10px;
    border:1px solid gold;
}
th {
    background:#222;
    color:gold;
}
</style>
</head>
<body>

<h2 style="color:gold;">ğŸ“¦ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>

<table id="productsTable">
<thead>
<tr>
<th>Ø§Ù„ÙƒÙˆØ¯</th>
<th>Ø§Ù„Ø§Ø³Ù…</th>
<th>Ø´Ø±Ø§Ø¡</th>
<th>Ø¨ÙŠØ¹</th>
<th>ÙƒÙ…ÙŠØ©</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script type="module">
import { supabase } from "../supabase.js";

async function loadProducts() {
    const table = document.querySelector("#productsTable tbody");

    const { data, error } = await supabase
        .from("products")
        .select("*")
        .order("id", { ascending: false });

    if (error) {
        table.innerHTML = "<tr><td colspan='5' style='color:red'>Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</td></tr>";
        return;
    }

    table.innerHTML = "";

    data.forEach(row => {
        let tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${row.product_code}</td>
            <td>${row.name}</td>
            <td>${row.buy}</td>
            <td>${row.sell}</td>
            <td>${row.quantity}</td>
        `;
        table.appendChild(tr);
    });
}

loadProducts();
</script>

</body>
</html>
