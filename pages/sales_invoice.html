<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ÙØ§ØªÙˆØ±Ø© Ù…Ø¨ÙŠØ¹Ø§Øª</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            background: #000;
            color: #fff;
            font-family: Arial;
            margin: 0;
            padding: 0;
        }
        header {
            background: #111;
            padding: 15px;
            text-align: center;
            border-bottom: 3px solid gold;
            font-size: 26px;
            font-weight: bold;
        }
        .box {
            background: #111;
            padding: 15px;
            margin: 15px;
            border-radius: 10px;
            border: 2px solid gold;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #444;
            font-size: 17px;
        }
        button {
            padding: 12px;
            width: 100%;
            margin-top: 10px;
            background: gold;
            color: #000;
            border: none;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
        }
        table {
            width: 100%;
            margin-top: 10px;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: center;
            background: #111;
            border-bottom: 1px solid #333;
        }
        .delete-btn {
            background: red;
            color: #fff;
            padding: 6px 10px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
        }

        /* Ù…ÙƒØ§Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ */
        #cameraBox {
            display: none;
            background: #111;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            border: 2px solid gold;
        }
        video {
            width: 100%;
        }
    </style>

    <!-- Ù…ÙƒØªØ¨Ø© Ù…Ø§Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ -->
    <script src="https://cdn.jsdelivr.net/npm/@zxing/library@latest"></script>
</head>

<body>

<header>ğŸ§¾ Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</header>

<!-- Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
<div class="box">
    <label>ğŸ‘¤ Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
    <select id="customerSelect"></select>
</div>

<!-- Ø§Ù„Ø¨Ø­Ø« -->
<div class="box">
    <label>ğŸ” Ø¨Ø­Ø« Ø§Ù„ØµÙ†Ù (Ø¨Ø§Ø±ÙƒÙˆØ¯ / Ø§Ø³Ù… / ÙƒÙˆØ¯)</label>
    <input id="barcodeInput" placeholder="Ø§ÙƒØªØ¨ Ø£Ùˆ Ø§Ù…Ø³Ø­ Ø¨Ø§Ø±ÙƒÙˆØ¯">

    <button onclick="startScan()">ğŸ“· ØªØ´ØºÙŠÙ„ Ù…Ø§Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</button>

    <div id="cameraBox">
        <video id="video" playsinline></video>
        <button onclick="stopScan()">âŒ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
    </div>

    <input id="productNameInput" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…">
    <input type="number" id="productQty" value="1" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">

    <button onclick="addItemToInvoice()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù Ù„Ù„ÙØ§ØªÙˆØ±Ø©</button>
</div>

<!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù -->
<div class="box">
    <table>
        <thead>
            <tr>
                <th>Ø§Ù„ØµÙ†Ù</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                <th>Ø­Ø°Ù</th>
            </tr>
        </thead>
        <tbody id="invoiceTableBody"></tbody>
    </table>
</div>

<!-- Ø§Ù„Ø­Ø³Ø§Ø¨ -->
<div class="box">
    <p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="totalNoTax">0</span> Ø±ÙŠØ§Ù„</p>

    <label>Ø§Ù„Ø®ØµÙ…</label>
    <input type="number" id="discountInput" value="0">

    <h3>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: <span id="finalTotal">0</span> Ø±ÙŠØ§Ù„</h3>

    <label>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹</label>
    <input id="paidAmount" type="number" placeholder="0">

    <h3>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="remainingAmount">0</span> Ø±ÙŠØ§Ù„</h3>

    <button onclick="saveInvoice()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
</div>

<script type="module" src="../supabase.js"></script>
<script type="module" src="../js/invoice.js"></script>

</body>
</html>
