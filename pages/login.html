import { supabase } from "./supabase.js";

// تسجيل الدخول
async function login() {
    const id = document.getElementById("user").value.trim();
    const pin = document.getElementById("pin").value.trim();

    if (!id || !pin) {
        alert("يرجى إدخال البيانات كاملة");
        return;
    }

    const { data, error } = await supabase
        .from("users")
        .select("*")
        .eq("id", id)
        .eq("pin", pin)
        .single();

    if (error || !data) {
        alert("المستخدم غير موجود أو البيانات خاطئة");
        return;
    }

    // نجاح الدخول
    alert("تم تسجيل الدخول بنجاح");

    // الانتقال لصفحة الأصناف
    window.location.href = "https://mohamad0790.github.io/smartkey-pro/pages/products.html";
}

// ربط الزر بالدالة
window.login = login;
